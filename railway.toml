[build]
builder = "NIXPACKS"
watchPatterns = ["backend/**/*", "supabase/**/*"]

[build.args]
NIXPACKS_PATH = "backend"
NIXPACKS_NODE_VERSION = "20"

[deploy]
startCommand = "npm run build && node dist/index.js"
restartPolicyType = "ON_FAILURE"
restartPolicyMaxRetries = 10
